openapi: 3.0.3
info:
  title: Aha! REST API
  description: API for interacting with Aha! product management platform.
  version: 1.0.0

servers:
  - url: https://{subdomain}.aha.io/api/v1
    description: Aha! API server
    variables:
      subdomain:
        default: mycompany
        description: Your Aha! account subdomain

paths:
  /users:
    get:
      summary: List users
      description: Fetches a list of users associated with the Aha! account.
      responses:
        '200':
          description: A list of users
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'

  /users/{id}:
    get:
      summary: Get a specific user
      description: Retrieves details of a specific user by their ID.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A single user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  /releases/{release_id}/features:
    post:
      summary: Create a feature
      description: Adds a new feature to a specified release.
      parameters:
        - name: release_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FeatureCreateRequest'
      responses:
        '201':
          description: Feature created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Feature'

  /features/{feature_id}/comments:
    post:
      summary: Create a comment on a feature
      description: Adds a new comment to the specified feature.
      parameters:
        - name: feature_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentCreateRequest'
      responses:
        '201':
          description: Comment created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'

  /epics/{epic_id}/comments:
    get:
      summary: List comments on an epic
      description: Retrieves a list of comments associated with the specified epic.
      parameters:
        - name: epic_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'
        '400':
          description: Invalid input
        '404':
          description: Epic not found

  /requirements/{requirement_id}/comments:
    get:
      summary: List comments on a requirement
      description: Retrieves a list of comments associated with the specified requirement.
      parameters:
        - name: requirement_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'
        '400':
          description: Invalid input
        '404':
          description: Requirement not found

  /ideas/{idea_id}/comments:
    get:
      summary: List comments on an idea
      description: Retrieves a list of comments associated with the specified idea.
      parameters:
        - name: idea_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'

  /initiatives/{initiative_id}/comments:
    get:
      summary: List comments on an initiative
      description: Retrieves a list of comments associated with the specified initiative.
      parameters:
        - name: initiative_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'

  /goals/{goal_id}/comments:
    get:
      summary: List comments on a goal
      description: Retrieves a list of comments associated with the specified goal.
      parameters:
        - name: goal_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'

  /releases/{release_id}/comments:
    get:
      summary: List comments on a release
      description: Retrieves a list of comments associated with the specified release.
      parameters:
        - name: release_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'

  /release_phases/{release_phase_id}/comments:
    get:
      summary: List comments on a release phase
      description: Retrieves a list of comments associated with the specified release phase.
      parameters:
        - name: release_phase_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'

  /todos/{todo_id}/comments:
    get:
      summary: List comments on a to-do
      description: Retrieves a list of comments associated with the specified to-do.
      parameters:
        - name: todo_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'

  /products/{product_id}/comments:
    get:
      summary: List comments in a product
      description: Retrieves a list of comments associated with the specified product.
      parameters:
        - name: product_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'
  /products/{product_id}/competitors:
    get:
      summary: List competitors in a product
      description: Retrieves a list of competitors associated with the specified product.
      parameters:
        - name: product_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: List of competitors
          content:
            application/json:
              schema:
                type: object
                properties:
                  competitors:
                    type: array
                    items:
                      $ref: '#/components/schemas/Competitor'
    post:
      summary: Create a competitor
      description: Adds a new competitor to the specified product.
      parameters:
        - name: product_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompetitorCreateRequest'
      responses:
        '201':
          description: Competitor created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Competitor'

  /competitors/{competitor_id}:
    get:
      summary: Get a specific competitor
      description: Retrieves details of the specified competitor.
      parameters:
        - name: competitor_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Competitor details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Competitor'
    put:
      summary: Update a competitor
      description: Updates the details of the specified competitor.
      parameters:
        - name: competitor_id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompetitorUpdateRequest'
      responses:
        '200':
          description: Competitor updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Competitor'
    delete:
      summary: Delete a competitor
      description: Removes the specified competitor.
      parameters:
        - name: competitor_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Competitor deleted

components:
  schemas:
    User:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string

    FeatureCreateRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        start_date:
          type: string
          format: date
        due_date:
          type: string
          format: date

    Feature:
      allOf:
        - $ref: '#/components/schemas/FeatureCreateRequest'
        - type: object
          properties:
            id:
              type: string
            release_id:
              type: string

    CommentCreateRequest:
      type: object
      properties:
        body:
          type: string
      required:
        - body

    Comment:
      type: object
      properties:
        id:
          type: string
        body:
          type: string
        created_at:
          type: string
          format: date-time
        user:
          $ref: '#/components/schemas/User'
    CompetitorCreateRequest:
      type: object
      properties:
        competitor:
          type: object
          required:
            - name
          properties:
            name:
              type: string
            description:
              type: string
            strengths:
              type: string
            weaknesses:
              type: string
            website:
              type: string
              format: uri

    CompetitorUpdateRequest:
      type: object
      properties:
        competitor:
          type: object
          properties:
            name:
              type: string
            description:
              type: string
            strengths:
              type: string
            weaknesses:
              type: string
            website:
              type: string
              format: uri

    Competitor:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        strengths:
          type: string
        weaknesses:
          type: string
        website:
          type: string
          format: uri

  securitySchemes:
    OAuth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://{subdomain}.aha.io/oauth/authorize
          tokenUrl: https://{subdomain}.aha.io/oauth/token
          scopes: {}
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

security:
  - OAuth2: []
  - BearerAuth: []

tags:
  - name: Competitors
  - name: Users
  - name: Features
  - name: Releases
  - name: Comments
  - name: Epics
  - name: Requirements
  - name: Ideas
  - name: Initiatives
  - name: Goals
  - name: Release Phases
  - name: Todos
  - name: Products
